<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Request via Telegram</title>
  <style>
      body {
        font-family: Arial, sans-serif;
        background: #121212;
        color: #fff;
        padding: 20px;
      }
      .card {
        background: #1e1e1e;
        padding: 20px;
        border-radius: 12px;
        max-width: 400px;
        margin: auto;
      }
      input, textarea, button {
        width: 100%;
        margin-top: 10px;
        padding: 10px;
        border-radius: 6px;
        border: none;
      }
      button {
        background: #b50000;
        color: #fff;
        font-weight: bold;
        cursor: pointer;
      }
  </style>
</head>
<body>

<div class="card">
    <h2>Request ke Admin</h2>

    <input type="text" id="nama" placeholder="Nama kamu" required>
    <textarea id="pesan" placeholder="Pesan atau request..." required></textarea>
    <input type="text" id="foto" placeholder="Link foto (opsional)">
    
    <button onclick="kirimRequest()">Kirim</button>

    <p id="status"></p>
</div>

<script>
async function kirimRequest() {
    const nama = document.getElementById('nama').value;
    const pesan = document.getElementById('pesan').value;
    const foto = document.getElementById('foto').value;

    if (!nama || !pesan) {
        return alert("Nama dan pesan wajib diisi!");
    }

    const BOT_TOKEN = "7633053355:AAHWtCVc-pDNzfk3fBjRU-JWN3jjMbMf75w";
    const CHAT_ID = "5091570030";

    const caption = `üì© *Request Baru Dari Website*\n\nüë§ Nama: ${nama}\nüí¨ Request: ${pesan}`

    const url = `https://api.telegram.org/bot${BOT_TOKEN}/sendPhoto`;

    // üî• Jika foto kosong ‚Üí gunakan backend NGL generator
    let photoURL = foto.trim() !== "" 
        ? foto 
        : `https://fathurweb.qzz.io/api/canvas/ngl?${encodeURIComponent(nama)}=jika&text=${encodeURIComponent(pesan)}`;

    const fd = new FormData();
    fd.append("chat_id", CHAT_ID);
    fd.append("caption", caption);
    fd.append("parse_mode", "Markdown");
    fd.append("photo", photoURL);

    document.getElementById('status').innerText = "Mengirim...";

    try {
      let res = await fetch(url, {
        method: "POST",
        body: fd
      });

      if (res.ok) {
        document.getElementById('status').innerText = "‚úî Berhasil dikirim!";
      } else {
        document.getElementById('status').innerText = "‚ùå Gagal mengirim.";
      }

    } catch (e) {
      document.getElementById('status').innerText = "‚ö† Error koneksi.";
    }
}
</script>

</body>
</html>
